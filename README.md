# 超级链接与标签管理工具

Chrome 扩展（Manifest v3），提供批量链接管理、标签自动化和磁力链接提取功能。

## 主要功能

### 1. 电影链接打开器
批量解析并打开影片详情页，支持智能防火墙规避机制。

**特性：**
- ✅ 单页模式：解析单个列表页的所有链接
- ✅ TOP 模式：自动处理前 8 页内容
- ✅ 可配置批量控制：自定义每批打开数量（1-10 个）
- ✅ 智能延迟：可调节间隔时间（1-30 秒），带 ±30% 随机抖动
- ✅ 后台任务：关闭 popup 后任务继续运行
- ✅ 实时统计：显示总链接数和已打开标签数
- ✅ 进度追踪：实时显示任务进度
- ✅ **任务取消**：支持中途取消正在运行的任务
- ✅ **多网站预设**：支持 JavDB、JavBus、JavLibrary 等网站
- ✅ **自定义选择器**：可自定义 CSS 选择器适配任意网站

**防火墙规避机制：**
- 分批打开标签，避免瞬间大量请求
- 随机延迟抖动，模拟人类操作行为
- 后台标签打开，减少资源占用
- 自动跳过已打开的重复链接

### 2. 标签页刷新器
按顺序刷新当前窗口的所有标签页。

**特性：**
- 可配置刷新间隔（最小 0.1 秒）
- 实时显示刷新进度（x/总数）
- 支持随时停止刷新任务
- 刷新完成后自动停止
- ✅ **排除固定标签**：可选择跳过 pinned 标签

### 3. 磁力链接提取器
从当前窗口的所有标签页中提取磁力链接。

**模式：**
- **第一条模式**：每个标签页提取第一条磁力链接
- **所有链接模式**：提取所有标签页的全部磁力链接
- ✅ **智能去重**：自动过滤重复链接（基于 btih hash）
- ✅ **格式验证**：验证 `magnet:?xt=urn:btih:` 格式
- ✅ **点击复制**：单击任意链接即可复制
- ✅ **导出为 TXT**：一键导出所有链接到文件
- 显示详细提取统计信息（有效/重复/无效）

### 4. 历史记录
记录所有任务执行历史。

**特性：**
- 可折叠面板，节省空间
- 保存最近 50 条记录
- 显示任务类型、结果和时间
- 支持一键清空

### 5. 实时日志
显示操作日志，方便调试和追踪。

**特性：**
- 可折叠面板
- 最多保留 100 条日志
- 按级别着色（info/success/warning/error）
- 支持一键清空

### 6. 网络状态检测
实时监控网络连接状态。

**特性：**
- 底部状态栏显示
- 在线/离线状态切换动画
- 网络变化时自动提示

### 7. 主题切换
现代化黑白灰色调设计，支持深色/浅色模式。

**特性：**
- 一键切换深色/浅色主题
- 设置持久化到浏览器存储
- 流畅的过渡动画
- 系统级字体渲染优化

## 安装方式

1. 克隆或下载本仓库
   ```bash
   git clone https://github.com/Banezzz/personalized_magnet_suite.git
   ```

2. 在 Chrome 浏览器中打开 `chrome://extensions`

3. 启用右上角的「开发者模式」

4. 点击「加载已解压的扩展程序」

5. 选择项目根目录

6. 完成！点击扩展图标即可使用

## 使用建议

### 电影链接打开器配置推荐

**保守模式**（推荐，避免触发防火墙）：
- 每批数量：2
- 间隔秒数：3

**快速模式**：
- 每批数量：3
- 间隔秒数：2

**极度安全模式**：
- 每批数量：1
- 间隔秒数：5

### 网站预设说明

| 预设 | 选择器 | 适用网站 |
|------|--------|----------|
| JavDB | `.movie-list.h.cols-4 a.box` | javdb.com |
| JavBus | `.movie-box` | javbus.com |
| JavLibrary | `.video a[href*="/v="]` | javlibrary.com |
| 通用列表 | `a[href]` | 任意网站 |
| 自定义 | 用户输入 | 任意网站 |

## 技术架构

- **Manifest**: v3
- **模块化**: ES6 模块系统
- **消息传递**: Chrome Extension Message Passing API
- **后台任务**: Service Worker 持久化
- **样式**: 原生 CSS 变量 + 现代化设计系统
- **存储**: chrome.storage.sync (主题) + chrome.storage.local (历史)

## 开发

无需构建工具，直接修改源码后在扩展管理页面点击「刷新」即可热重载。

### 项目结构
```
.
├── manifest.json          # 扩展配置
├── popup.html            # 主界面
├── popup.js              # 入口脚本
├── popup.css             # 样式（含深色主题）
├── background.js         # Service Worker（后台任务）
├── movie-links.js        # 电影链接模块（含网站预设）
├── tab-reloader.js       # 标签刷新模块
├── magnet-extractor.js   # 磁力链接模块（含去重验证）
├── utils.js              # 共享工具（主题/日志/历史/网络状态）
├── CLAUDE.md             # Claude Code 开发指南
└── README.md             # 项目说明
```

## 许可

MIT License
